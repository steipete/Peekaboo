{
  "version": "1.0",
  "projectType": "mixed",
  "targets": [
    {
      "name": "Peekaboo",
      "type": "executable",
      "enabled": true,
      "buildCommand": "./scripts/build-swift-debug.sh",
      "outputPath": "./peekaboo",
      "settlingDelay": 1000,
      "debounceInterval": 5000,
      "icon": "./assets/icon_512x512@2x.png",
      "watchPaths": [
        "Core/PeekabooCore/**/*.swift",
        "AXorcist/**/*.swift",
        "Commander/**/*.swift",
        "Tachikoma/**/*.swift",
        "TauTUI/**/*.swift",
        "Apps/CLI/**/*.swift"
      ],
      "postBuild": [
        {
          "name": "Swift tests",
          "command": "./scripts/status-swifttests.sh",
          "runOn": "success",
          "timeoutSeconds": 1800,
          "maxLines": 5
        }
      ]
    },
    {
      "name": "Commander",
      "type": "test",
      "enabled": true,
      "testCommand": "swift test --package-path Commander",
      "watchPaths": [
        "Commander/**/*.swift",
        "Commander/Package.swift"
      ],
      "settlingDelay": 1000,
      "debounceInterval": 5000
    },
    {
      "name": "AXorcist",
      "type": "test",
      "enabled": true,
      "testCommand": "swift test --package-path AXorcist",
      "watchPaths": [
        "AXorcist/**/*.swift",
        "AXorcist/Package.swift"
      ],
      "settlingDelay": 1000,
      "debounceInterval": 5000
    },
    {
      "name": "Tachikoma",
      "type": "test",
      "enabled": true,
      "testCommand": "swift test --package-path Tachikoma",
      "watchPaths": [
        "Tachikoma/**/*.swift",
        "Tachikoma/Package.swift"
      ],
      "settlingDelay": 1000,
      "debounceInterval": 5000
    },
    {
      "name": "TauTUI",
      "type": "test",
      "enabled": true,
      "testCommand": "swift test --package-path TauTUI",
      "watchPaths": [
        "TauTUI/**/*.swift",
        "TauTUI/Package.swift"
      ],
      "settlingDelay": 1000,
      "debounceInterval": 5000
    },
    {
      "name": "Peekaboo.app",
      "type": "app-bundle",
      "platform": "macos",
      "enabled": true,
      "buildCommand": "./scripts/build-mac-debug.sh",
      "bundleId": "boo.peekaboo.mac.debug",
      "autoRelaunch": true,
      "settlingDelay": 4000,
      "debounceInterval": 5000,
      "icon": "./assets/icon_512x512@2x.png",
      "watchPaths": [
        "Apps/Mac/Peekaboo/**/*.swift",
        "Apps/Mac/Peekaboo/**/*.storyboard",
        "Apps/Mac/Peekaboo/**/*.xib",
        "Core/PeekabooCore/**/*.swift",
        "AXorcist/**/*.swift",
        "Commander/**/*.swift",
        "Tachikoma/**/*.swift",
        "TauTUI/**/*.swift"
      ]
    }
  ],
  "watchman": {
    "useDefaultExclusions": true,
    "excludeDirs": [
      "coverage",
      "*.log",
      "tmp_screenshots",
      "test_output",
      "Server/dist",
      "Server/node_modules"
    ],
    "projectType": "mixed",
    "maxFileEvents": 15000,
    "recrawlThreshold": 3,
    "settlingDelay": 1000,
    "rules": [
      {
        "pattern": "**/test_results/**",
        "action": "ignore",
        "reason": "Test output directory",
        "enabled": true
      },
      {
        "pattern": "**/*.xcuserstate",
        "action": "ignore",
        "reason": "Xcode user state files",
        "enabled": true
      },
      {
        "pattern": "**/Version.swift",
        "action": "ignore",
        "reason": "Auto-generated version file that changes on every build",
        "enabled": true
      }
    ]
  },
  "performance": {
    "profile": "balanced",
    "autoOptimize": true,
    "metrics": {
      "enabled": true,
      "reportInterval": 300
    }
  },
  "buildScheduling": {
    "parallelization": 1,
    "prioritization": {
      "enabled": true,
      "focusDetectionWindow": 300000,
      "priorityDecayTime": 1800000,
      "buildTimeoutMultiplier": 2
    }
  },
  "notifications": {
    "enabled": true
  },
  "logging": {
    "file": ".poltergeist.log",
    "level": "debug"
  },
  "statusScripts": [
    {
      "label": "SwiftLint",
      "command": "./scripts/status-swiftlint.sh",
      "cooldownSeconds": 60,
      "timeoutSeconds": 300,
      "maxLines": 3
    }
  ]
}
